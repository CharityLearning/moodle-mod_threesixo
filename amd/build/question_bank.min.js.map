{"version":3,"file":"question_bank.min.js","sources":["../src/question_bank.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD code for the Question Bank.\n *\n * The question bank dialogue contains all the questions that can be added to the 360 feedback activity.\n * It also serves as the interface where questions can be added, edited, or even removed permanently from the question bank.\n *\n * @module     mod_threesixo/question_bank\n * @class      question_bank\n * @copyright  2016 Jun Pataleta <jun@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport * as templates from 'core/templates';\nimport * as notification from 'core/notification';\nimport * as ajax from 'core/ajax';\nimport {get_string as getString} from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Pending from 'core/pending';\nimport {notifyItemsUpdated} from \"mod_threesixo/events\";\nimport * as CheckboxToggleAll from 'core/checkbox-toggleall';\n\nconst SELECTORS = {\n    PICK_ALL: '#pick-all',\n    ADD_QUESTION: '#btn-question-bank-add',\n    QUESTION_CHECKBOX: '.question-checkbox',\n    DELETE_QUESTION: '.delete-question-button',\n    EDIT_QUESTION: '.edit-question-button',\n};\n\n// Private variables and functions.\nlet selectedQuestionsOld,\n    selectedQuestions,\n    questions = [],\n    threeSixtyId,\n    questionTypes,\n    questionBankDialogue,\n    inputDialogue;\n\n/**\n * Fetches option data for the question type selector.\n *\n * @param {number} selectedId The currently selected question type.\n * @returns {Array}\n */\nfunction getQuestionTypeOptions(selectedId) {\n    const questionTypeOptions = [];\n    // Get question type options.\n    for (const key in questionTypes) {\n        if (!questionTypes.hasOwnProperty(key)) {\n            continue;\n        }\n        const questionType = {\n            typeVal: key,\n            typeName: questionTypes[key]\n        };\n\n        if (typeof selectedId !== 'undefined' && key === selectedId) {\n            questionType.selected = true;\n        }\n\n        questionTypeOptions.push(questionType);\n    }\n\n    return questionTypeOptions;\n}\n\n/**\n * Loops over the list of questions and marks a question as checked if it belongs to the list of selected questions.\n *\n * @param {Object[]} questions The questions to be checked.\n * @returns {Object[]} The list of checked questions.\n */\nfunction checkQuestions(questions) {\n    for (const i in questions) {\n        const question = questions[i];\n        if (selectedQuestions.indexOf(questions[i].id) !== -1) {\n            question.checked = true;\n        }\n    }\n    return questions;\n}\n\n/**\n * Renders the question input dialogue.\n *\n * @param {String} dialogueTitle\n * @param {Object} bodyTemplate\n */\nfunction renderInputDialogue(dialogueTitle, bodyTemplate) {\n    const pendingPromise = new Pending('mod_threesixo/question_input');\n    ModalFactory.create({\n        type: ModalFactory.types.SAVE_CANCEL,\n        title: dialogueTitle,\n        body: bodyTemplate,\n        large: true\n    }).then(function(modal) {\n        inputDialogue = modal;\n\n        // Display the dialogue.\n        inputDialogue.show();\n\n        // On show handler.\n        modal.getRoot().on(ModalEvents.shown, function() {\n            // Focus on the question text area.\n            $(\"#question-input\").focus();\n        });\n\n        // On hide handler.\n        modal.getRoot().on(ModalEvents.hidden, function() {\n            // Just destroy the modal.\n            modal.destroy();\n        });\n\n        // On save handler.\n        modal.getRoot().on(ModalEvents.save, function() {\n            const question = $(\"#question-input\").val().trim();\n            if (!question) {\n                getString('requiredelement', 'form').done(function(errorMsg) {\n                    const errorMessage = $('<div/>').append(errorMsg)\n                        .attr('class', 'alert alert-error')\n                        .attr('role', 'alert');\n                    $('.error-container').html(errorMessage);\n                }).fail(notification.exception);\n                return;\n            }\n            const qtype = $(\"#question-type-select\").val();\n            const threesixtyid = $(\"#threesixtyid\").val();\n\n            const data = {\n                question: question,\n                type: qtype,\n                threesixtyid: threesixtyid,\n            };\n\n            let method = 'mod_threesixo_add_question';\n            const questionId = $(\"#question-id\").val();\n            if (questionId) {\n                method = 'mod_threesixo_update_question';\n                data.id = questionId;\n            }\n\n            // Refresh the list of questions through AJAX.\n            const promises = ajax.call([\n                {methodname: method, args: data}\n            ]);\n            promises[0].done(function() {\n                refreshQuestionsList();\n            }).fail(notification.exception);\n        });\n        return true;\n    }).then(() => {\n        return pendingPromise.resolve();\n    }).catch(notification.exception);\n}\n\n/**\n * Function that displays the input dialogue.\n *\n * @param {Number} threesixtyId The 360 instance ID.\n * @param {Number} questionId The question ID.\n */\nconst displayInputDialogue = function(threesixtyId, questionId) {\n    getString('addanewquestion', 'mod_threesixo').then(function(title) {\n        const data = {\n            threesixtyid: threesixtyId\n        };\n\n        if (questionId) {\n            data.questionid = questionId;\n            for (const i in questions) {\n                const question = questions[i];\n                if (question.id === questionId) {\n                    data.question = question.question;\n                    data.type = question.type;\n                    break;\n                }\n            }\n        }\n\n        data.questionTypes = getQuestionTypeOptions(data.type);\n        const body = templates.render('mod_threesixo/item_edit', data);\n        return renderInputDialogue(title, body);\n    }).catch(notification.exception);\n};\n\n/**\n * Displays the question bank dialogue.\n * @param {string} title\n * @param {Promise} questionBankTemplate\n */\nfunction displayQuestionBankDialogue(title, questionBankTemplate) {\n    const pendingPromise = new Pending('mod_threesixo/question_bank');\n\n    ModalFactory.create({\n        type: ModalFactory.types.SAVE_CANCEL,\n        title: title,\n        body: questionBankTemplate,\n        large: true\n    }).then(function(modal) {\n        const modalRoot = modal.getRoot();\n\n        // On hide handler.\n        modalRoot.on(ModalEvents.hidden, function() {\n            // Empty modal contents when it's hidden.\n            modal.setBody('');\n        });\n\n        modalRoot.on(ModalEvents.save, function() {\n            let changed = false;\n            // Check if the new selected questions exist in the old selected questions.\n            selectedQuestionsOld.forEach(questionId => {\n                if (selectedQuestions.indexOf(questionId) === -1) {\n                    changed = true;\n                }\n            });\n            // Conversely, if the newly selected items seem to have not changed,\n            // check if the old selected questions exist in the new selected questions.\n            if (!changed) {\n                selectedQuestions.forEach(questionId => {\n                    if (selectedQuestionsOld.indexOf(questionId) === -1) {\n                        changed = true;\n                    }\n                });\n            }\n\n            if (changed) {\n                const data = {\n                    threesixtyid: threeSixtyId,\n                    questionids: selectedQuestions\n                };\n\n                // Save the selected questions.\n                const promises = ajax.call([\n                    {methodname: 'mod_threesixo_set_items', args: data}\n                ]);\n                // Refresh the list of questions through AJAX.\n                promises[0].then(function() {\n                    return notifyItemsUpdated(threeSixtyId);\n                }).catch(notification.exception);\n            } else {\n                // Nothing changed in the selection, but it's possible that the question texts have been updated.\n                // So better to refresh the list as well.\n                notifyItemsUpdated(threeSixtyId);\n            }\n        });\n\n        questionBankDialogue = modal;\n\n        // Display the dialogue.\n        return questionBankDialogue.show();\n    }).then(() => {\n        return pendingPromise.resolve();\n    }).catch(notification.exception);\n}\n\n/**\n * Adds/removes a question from the array of selected questions depending on its selection state.\n *\n * @param {number} questionId\n * @param {boolean} isSelected\n */\nconst updateItemSelection = (questionId, isSelected) => {\n    if (isSelected) {\n        const index = selectedQuestions.indexOf(questionId);\n        if (index === -1) {\n            // Add the question ID if it's not yet present.\n            selectedQuestions.push(questionId);\n        }\n    } else {\n        const index = selectedQuestions.indexOf(questionId);\n        if (index > -1) {\n            // Remove the question ID only if it's present.\n            selectedQuestions.splice(index, 1);\n        }\n    }\n};\n\n/**\n * Binds the event listeners to question items such as edit, delete, checking.\n */\nconst registerEvents = function() {\n    document.addEventListener('click', (e) => {\n        if (e.target.closest(SELECTORS.PICK_ALL)) {\n            const questionCheckboxes = document.querySelectorAll(SELECTORS.QUESTION_CHECKBOX);\n            questionCheckboxes.forEach(checkbox => {\n                const questionId = parseInt(checkbox.dataset.questionid);\n                updateItemSelection(questionId, checkbox.checked);\n            });\n        } else if (e.target.closest(SELECTORS.QUESTION_CHECKBOX)) {\n            const questionCheckbox = e.target.closest(SELECTORS.QUESTION_CHECKBOX);\n            const questionId = parseInt(questionCheckbox.dataset.questionid);\n\n            updateItemSelection(questionId, questionCheckbox.checked);\n        } else if (e.target.closest(SELECTORS.EDIT_QUESTION)) {\n            e.preventDefault();\n\n            const editQuestionButton = e.target.closest(SELECTORS.EDIT_QUESTION);\n            const threesixtyId = parseInt(editQuestionButton.dataset.threesixtyid);\n            const questionId = parseInt(editQuestionButton.dataset.questionid);\n            displayInputDialogue(threesixtyId, questionId);\n        } else if (e.target.closest(SELECTORS.DELETE_QUESTION)) {\n            e.preventDefault();\n\n            const deleteButton = e.target.closest(SELECTORS.DELETE_QUESTION);\n            const threesixtyId = deleteButton.dataset.threesixtyid;\n            const questionId = deleteButton.dataset.questionid;\n            handleDeletion(questionId, threesixtyId);\n        } else if (e.target.closest(SELECTORS.ADD_QUESTION)) {\n            e.preventDefault();\n\n            const addButton = e.target.closest(SELECTORS.ADD_QUESTION);\n            const id = addButton.dataset.threesixtyid;\n            displayInputDialogue(id, null);\n        }\n    });\n};\n\n/**\n * Refreshes the list of questions in the question bank.\n */\nfunction refreshQuestionsList() {\n    // Get list of questions through AJAX.\n    const promises = ajax.call([\n        {\n            methodname: 'mod_threesixo_get_questions',\n            args: {}\n        }\n    ]);\n    promises[0].then(response => {\n        questions = response.questions;\n        const data = {\n            pickerMode: threeSixtyId,\n            questions: checkQuestions(questions)\n        };\n\n        return templates.render('mod_threesixo/question_list', data);\n    }).then(compiledSource => {\n        const questionListWrapper = document.querySelector(\"#questionListWrapper\");\n        if (questionListWrapper) {\n            questionListWrapper.innerHTML = compiledSource;\n        }\n        return null;\n    }).catch(notification.exception);\n}\n\n/**\n * Handles item deletion.\n *\n * @param {Number} questionId The question ID.\n * @param {Number} threesixtyId The 360 instance ID.\n */\nfunction handleDeletion(questionId, threesixtyId) {\n    getString('deletequestion', 'mod_threesixo').then(function(title) {\n        return ModalFactory.create({\n            title: title,\n            body: getString('confirmquestiondeletion', 'mod_threesixo'),\n            type: ModalFactory.types.SAVE_CANCEL\n        });\n    }).then(function(modal) {\n        modal.getRoot().on(ModalEvents.save, function() {\n            // Get list of questions through AJAX.\n            const promises = ajax.call([\n                {\n                    methodname: 'mod_threesixo_delete_question',\n                    args: {\n                        id: questionId,\n                        threesixtyid: threesixtyId,\n                    }\n                }\n            ]);\n            promises[0].then(function() {\n                return refreshQuestionsList();\n            }).catch(notification.exception);\n        });\n\n        modal.getRoot().on(ModalEvents.hidden, () => {\n            modal.destroy();\n        });\n\n        return modal.show();\n    }).catch(notification.exception);\n}\n\n\n/**\n * Create the context and render the question  bank template.\n */\nfunction renderQuestionBank() {\n    // Template context.\n    const context = {pickerMode: threeSixtyId};\n\n    // Render the question list.\n    const promises = ajax.call([\n        {\n            methodname: 'mod_threesixo_get_questions',\n            args: {}\n        }\n    ]);\n    promises[0].then(function(response) {\n        questions = response.questions;\n        context.questions = checkQuestions(questions);\n\n        // Render the template and display the comment chooser dialog.\n        return templates.render('mod_threesixo/question_bank', context);\n    }).then(questionBankTemplate => {\n        return getString('labelpickfromquestionbank', 'mod_threesixo').then(title => {\n            return displayQuestionBankDialogue(title, questionBankTemplate);\n        });\n    }).then(() => {\n        if (threeSixtyId) {\n            CheckboxToggleAll.init();\n        }\n        return true;\n    }).catch(notification.exception);\n}\n\nconst questionBankInit = function(id) {\n    threeSixtyId = id;\n\n    const methodCalls = [\n        {\n            methodname: 'mod_threesixo_get_question_types',\n            args: {}\n        }\n    ];\n\n    if (threeSixtyId) {\n        // Get selected items for the 360-degree feedback.\n        methodCalls.push({\n            methodname: 'mod_threesixo_get_items',\n            args: {\n                threesixtyid: threeSixtyId\n            }\n        });\n    }\n\n    // Get list of questions through AJAX.\n    const promises = ajax.call(methodCalls);\n    promises[0].then(function(response) {\n        questionTypes = response.questiontypes;\n        if (threeSixtyId) {\n            return promises[1];\n        }\n        renderQuestionBank();\n        return null;\n    }).then(response => {\n        if (response === null) {\n            return false;\n        }\n        selectedQuestions = [];\n        selectedQuestionsOld = [];\n        const items = response.items;\n        for (const i in items) {\n            if (!items.hasOwnProperty(i)) {\n                continue;\n            }\n            selectedQuestions.push(items[i].questionid);\n            // Store originally selected question IDs for comparison later.\n            selectedQuestionsOld.push(items[i].questionid);\n        }\n        renderQuestionBank();\n        return true;\n    }).catch(notification.exception);\n\n    registerEvents();\n};\n\n/** @alias module:mod_threesixo/question_bank */\nexport default {\n    init: questionBankInit,\n};\n"],"names":["SELECTORS","selectedQuestionsOld","selectedQuestions","threeSixtyId","questionTypes","questionBankDialogue","inputDialogue","questions","checkQuestions","i","question","indexOf","id","checked","displayInputDialogue","threesixtyId","questionId","then","title","data","threesixtyid","questionid","type","selectedId","questionTypeOptions","key","hasOwnProperty","questionType","typeVal","typeName","selected","push","getQuestionTypeOptions","dialogueTitle","bodyTemplate","pendingPromise","Pending","create","ModalFactory","types","SAVE_CANCEL","body","large","modal","show","getRoot","on","ModalEvents","shown","focus","hidden","destroy","save","val","trim","done","errorMsg","errorMessage","append","attr","html","fail","notification","exception","method","ajax","call","methodname","args","refreshQuestionsList","resolve","catch","renderInputDialogue","templates","render","updateItemSelection","isSelected","index","splice","registerEvents","document","addEventListener","e","target","closest","querySelectorAll","forEach","checkbox","parseInt","dataset","questionCheckbox","preventDefault","editQuestionButton","deleteButton","handleDeletion","response","pickerMode","compiledSource","questionListWrapper","querySelector","innerHTML","renderQuestionBank","context","questionBankTemplate","modalRoot","setBody","changed","questionids","displayQuestionBankDialogue","CheckboxToggleAll","init","methodCalls","promises","questiontypes","items"],"mappings":"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"}